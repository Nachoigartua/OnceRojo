import{_ as O,r as s,e as A,c as n,a as r,b as k,t as v,F as $,d as D,n as h,o as u}from"./index-CWLAntZ9.js";const T={class:"intruso-container text-white text-center px-3"},H={key:0},J={class:"reloj"},P={class:"mb-4 fs-5 animate-fade-in"},V={class:"row justify-content-center mt-4"},B={key:1},G={class:"row justify-content-center"},z=["disabled","onClick"],U={key:0,class:"mt-4 animate-slide-in"},L={key:2},Y={class:"fs-5 text-warning"},q={__name:"AdivinaElIntruso",setup(K){const m=s([]),S=s([]),l=s(""),o=s(0),c=s(!1),p=s(!1),d=s(""),y=s(!1),b=s(""),f=s(""),_=s([]),g=s(0),I=()=>{const a=new Date;return a.setUTCHours(3,0,0,0),a.toISOString().slice(0,10)},w=()=>{const a=new Date,e=new Date;e.setUTCHours(27,0,0,0);const t=e-a,i=String(Math.floor(t/(1e3*60*60))).padStart(2,"0"),C=String(Math.floor(t/(1e3*60)%60)).padStart(2,"0"),N=String(Math.floor(t/1e3%60)).padStart(2,"0");b.value=`${i}:${C}:${N}`},R=a=>{c.value=!0,p.value=a===l.value,d.value=p.value?"✅ ¡Correcto!":`❌ Incorrecto. El intruso era: ${l.value}`,p.value&&g.value++;const e=I();_.value.push(m.value[o.value]),localStorage.setItem("preguntas-guardadas-"+e,JSON.stringify(_.value)),o.value===2&&x(a,e)},x=(a,e)=>{g.value===3?d.value="🎉 Felicidades, acertaste 3 de 3 preguntas. ¡Ganaste!":d.value=`❌ Fallaste, Respondiste correctamente ${g.value} de 3 preguntas.`,localStorage.setItem("respuesta-"+e,"true"),localStorage.setItem("seleccionada-"+e,a),localStorage.setItem("correcta-"+e,l.value)},E=()=>{o.value<2?(o.value++,j(),c.value=!1):(o.value++,c.value=!1)},F=a=>a.map(e=>({item:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({item:e})=>e),j=()=>{S.value=F(m.value[o.value].opciones),l.value=m.value[o.value].intruso},M=async()=>{const a=I();try{const e=await fetch("/OnceRojo/adivina-intruso.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=(await e.json())[a];i?(m.value=i,j()):console.warn("No hay desafío cargado para hoy.")}catch(e){console.error("Error cargando el JSON:",e)}};return A(async()=>{const a=I();y.value=localStorage.getItem("respuesta-"+a)==="true",await M(),y.value&&(f.value=localStorage.getItem("seleccionada-"+a)||"",l.value=localStorage.getItem("correcta-"+a)||"",_.value=JSON.parse(localStorage.getItem("preguntas-guardadas-"+a))||[],g.value=_.value.filter(e=>e.intruso===l.value).length,x(f.value,a),w(),setInterval(w,1e3),c.value=!0,o.value=3)}),(a,e)=>(u(),n("div",T,[e[1]||(e[1]=r("h2",{class:"titulo-juego mb-5 animate-slide-in"},"🔎 Adiviná el Intruso 🔎",-1)),y.value?(u(),n("div",H,[e[0]||(e[0]=r("p",{class:"fs-5"},"Ya has respondido hoy.",-1)),r("h3",J,"Vuelve a intentarlo en: "+v(b.value),1),r("p",P,"Resultado: "+v(d.value),1),r("div",V,[(u(!0),n($,null,D(S.value,(t,i)=>(u(),n("div",{class:"col-10 col-md-4 mb-4",key:i},[r("button",{class:h(["boton-opcion",{correcta:t===l.value,incorrecta:t===f.value&&t!==l.value}]),disabled:""},v(t),3)]))),128))])])):o.value<3?(u(),n("div",B,[r("div",G,[(u(!0),n($,null,D(S.value,(t,i)=>(u(),n("div",{class:"col-10 col-md-4 mb-4",key:i},[r("button",{class:h(["boton-opcion",{correcta:c.value&&t===l.value,incorrecta:c.value&&t===f.value&&t!==l.value}]),disabled:c.value,onClick:C=>R(t)},v(t),11,z)]))),128))]),c.value?(u(),n("div",U,[r("p",{class:h(["fs-5",p.value?"text-success":"text-danger"])},v(d.value),3),o.value<2?(u(),n("button",{key:0,class:"btn btn-primary mt-3",onClick:E}," Siguiente Pregunta ")):k("",!0)])):k("",!0)])):o.value>=3?(u(),n("div",L,[r("p",{class:h(["fs-4",g.value===3?"text-success":"text-danger"])},v(d.value),3),r("p",Y,"Vuelve a jugar en: "+v(b.value),1)])):k("",!0)]))}},W=O(q,[["__scopeId","data-v-91610439"]]);export{W as default};
