import{_ as M,r as s,e as A,c as n,a as o,b as k,t as v,F as $,d as D,n as _,o as l}from"./index-D9L8tubP.js";const J={class:"intruso-container text-white text-center px-3"},T={key:0},H={class:"reloj"},P={class:"mb-4 fs-5 animate-fade-in"},V={class:"row justify-content-center mt-4"},B={key:1},G={class:"row justify-content-center"},z=["disabled","onClick"],U={key:0,class:"mt-4 animate-slide-in"},L={key:2},Q={class:"fs-5 text-warning"},Y={__name:"AdivinaElIntruso",setup(q){const m=s([]),h=s([]),u=s(""),r=s(0),c=s(!1),p=s(!1),d=s(""),S=s(!1),y=s(""),b=s(""),f=s([]),g=s(0),I=()=>{const a=new Date;return a.setUTCHours(3,0,0,0),a.toISOString().slice(0,10)},w=()=>{const a=new Date,e=new Date;e.setUTCHours(27,0,0,0);const t=e-a,i=String(Math.floor(t/(1e3*60*60))).padStart(2,"0"),C=String(Math.floor(t/(1e3*60)%60)).padStart(2,"0"),F=String(Math.floor(t/1e3%60)).padStart(2,"0");y.value=`${i}:${C}:${F}`},N=a=>{c.value=!0,p.value=a===u.value,d.value=p.value?"✅ ¡Correcto!":`❌ Incorrecto. El intruso era: ${u.value}`,p.value&&g.value++;const e=I();f.value.push(m.value[r.value]),localStorage.setItem("preguntas-guardadas-"+e,JSON.stringify(f.value)),r.value===2&&j(e)},j=a=>{g.value===3?d.value="🎉 Felicidades, acertaste 3 de 3 preguntas. ¡Ganaste!":d.value=`❌ Fallaste, Respondiste correctamente ${g.value} de 3 preguntas.`,localStorage.setItem("respuesta-"+a,"true"),localStorage.setItem("correctas-"+a,g.value),localStorage.setItem("preguntas-guardadas-"+a,JSON.stringify(f.value))},O=()=>{r.value<2?(r.value++,x(),c.value=!1):(r.value++,c.value=!1)},R=a=>a.map(e=>({item:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({item:e})=>e),x=()=>{h.value=R(m.value[r.value].opciones),u.value=m.value[r.value].intruso},E=async()=>{const a=I();try{const e=await fetch("/OnceRojo/adivina-intruso.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=(await e.json())[a];i?(m.value=i,x()):console.warn("No hay desafío cargado para hoy.")}catch(e){console.error("Error cargando el JSON:",e)}};return A(async()=>{const a=I();S.value=localStorage.getItem("respuesta-"+a)==="true",await E(),S.value&&(b.value=localStorage.getItem("seleccionada-"+a)||"",u.value=localStorage.getItem("correcta-"+a)||"",f.value=JSON.parse(localStorage.getItem("preguntas-guardadas-"+a))||[],g.value=parseInt(localStorage.getItem("correctas-"+a),10)||0,j(a),w(),setInterval(w,1e3),c.value=!0,r.value=3)}),(a,e)=>(l(),n("div",J,[e[1]||(e[1]=o("h2",{class:"titulo-juego mb-2 animate-slide-in"},"🔎 Adiviná el Intruso 🔎",-1)),e[2]||(e[2]=o("h3",{class:"subtitulo-juego mb-5"},"¿Quién no jugó en Independiente?",-1)),S.value?(l(),n("div",T,[e[0]||(e[0]=o("p",{class:"fs-5"},"Ya has respondido hoy.",-1)),o("h3",H,"Vuelve a intentarlo en: "+v(y.value),1),o("p",P,"Resultado: "+v(d.value),1),o("div",V,[(l(!0),n($,null,D(h.value,(t,i)=>(l(),n("div",{class:"col-10 col-md-4 mb-4",key:i},[o("button",{class:_(["boton-opcion",{correcta:t===u.value,incorrecta:t===b.value&&t!==u.value}]),disabled:""},v(t),3)]))),128))])])):r.value<3?(l(),n("div",B,[o("div",G,[(l(!0),n($,null,D(h.value,(t,i)=>(l(),n("div",{class:"col-10 col-md-4 mb-4",key:i},[o("button",{class:_(["boton-opcion",{correcta:c.value&&t===u.value,incorrecta:c.value&&t===b.value&&t!==u.value}]),disabled:c.value,onClick:C=>N(t)},v(t),11,z)]))),128))]),c.value?(l(),n("div",U,[o("p",{class:_(["fs-5",p.value?"text-success":"text-danger"])},v(d.value),3),r.value<2?(l(),n("button",{key:0,class:"btn btn-primary mt-3",onClick:O}," Siguiente Pregunta ")):k("",!0)])):k("",!0)])):r.value>=3?(l(),n("div",L,[o("p",{class:_(["fs-4",g.value===3?"text-success":"text-danger"])},v(d.value),3),o("p",Q,"Vuelve a jugar en: "+v(y.value),1)])):k("",!0)]))}},W=M(Y,[["__scopeId","data-v-96dcbc99"]]);export{W as default};
