import{r as s,p as P,e as R,q as V,c as i,a as v,b as h,t as f,h as $,v as q,s as x,j as z,F as N,d as C,o as u,n as H}from"./index-C42jy6vk.js";import{o as B,c as J}from"./horaArgentina-wJwX-x9z.js";const K={class:"contenedor"},L={class:"titulo"},U={key:0},W={class:"subtitulo"},Y=["disabled"],G={key:0,class:"mensaje-error"},Q={class:"pizarra"},X={class:"dt-container"},Z=["onClick"],ee={key:1,class:"cartel-mensaje"},ne={__name:"El11Historico",setup(ae){const d=s({}),y=s([]),r=s({}),S=s(""),c=s(60),p=s(!1),E=s("formacion"),T=s([]),I=s(""),g=s(!1),b=s("");let m;const O=P(()=>{const e=Math.floor(c.value/60),a=c.value%60;return`${String(e).padStart(2,"0")}:${String(a).padStart(2,"0")}`});function D(e){return typeof e!="string"?"":e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}function w(e){const a=e.map(o=>o.posicion),t=a.filter(o=>o.startsWith("DF")).map(o=>o==="DFI"?"DFD":o==="DFD"?"DFI":o),l=a.filter(o=>o.startsWith("MC")),n=a.filter(o=>["EI","DC","ED"].includes(o)),j=a.filter(o=>o==="POR");return[n,l,t,j]}R(async()=>{try{const e=B(),a=localStorage.getItem("ultimaPartida");r.value=JSON.parse(localStorage.getItem("nombresAdivinados")||"{}"),p.value=localStorage.getItem("juegoFinalizado")==="true";const t=await fetch("/OnceRojo/onceHistorico.json").then(n=>n.json());if(!t||!t[e])throw new Error("Datos no disponibles");if(d.value=t[e],T.value=w(d.value.formacion),y.value=[...d.value.formacion.map(n=>({nombre:D(n.nombre),posicion:n.posicion})),{nombre:D(d.value.dt.nombre),posicion:"DT"}],p.value){I.value=`🎮 Ya jugaste hoy
Vuelve a jugar en `+F(),g.value=!0;return}if(a===e){I.value=`🎮 Ya jugaste hoy
Vuelve a jugar en `+F(),g.value=!0;return}const l=localStorage.getItem("tiempoRestante");l!==null?c.value=parseInt(l):(c.value=d.value.tiempo_limite||60,localStorage.setItem("tiempoRestante",c.value.toString())),M()}catch(e){console.error(e),_("Error al cargar los datos.")}});function _(e){I.value=e,g.value=!0,setTimeout(()=>g.value=!1,5e3)}function A(){if(p.value)return;const e=D(S.value.trim());if(!e)return;const a=y.value.find(t=>{const l=D(t.nombre.split(" ").pop());return t.nombre===e||l===e});a&&!r.value[a.posicion]?(r.value[a.posicion]=a.nombre,S.value="",b.value="",localStorage.setItem("nombresAdivinados",JSON.stringify(r.value)),Object.keys(r.value).length===y.value.length&&(p.value=!0,localStorage.setItem("juegoFinalizado","true"),clearInterval(m),_("¡Felicidades! Has completado el 11 inicial."))):(b.value="Nombre incorrecto o ya ingresado.",setTimeout(()=>b.value="",3e3))}function M(){m&&clearInterval(m),m=setInterval(()=>{if(c.value>0)c.value--,localStorage.setItem("tiempoRestante",c.value.toString());else{clearInterval(m),p.value=!0;const e=new Date().toISOString().split("T")[0];localStorage.setItem("nombresAdivinados",JSON.stringify(r.value)),localStorage.setItem("ultimaPartida",e),localStorage.setItem("juegoFinalizado","true"),_("⏰ Se acabó el tiempo. Intenta mañana.")}},1e3)}V(()=>{m&&clearInterval(m)});function F(){return J()}function k(e){let a="";if(e==="DT")a=d.value.dt.pista;else{const t=d.value.formacion.find(l=>l.posicion===e);a=(t==null?void 0:t.pista)||"Sin pista disponible."}_(a)}return(e,a)=>(u(),i("div",K,[v("h1",L,f(d.value.equipo||"Nombre del partido no disponible"),1),E.value==="formacion"?(u(),i("div",U,[v("p",W,"Tiempo restante: "+f(O.value),1),a[2]||(a[2]=v("p",{class:"indicacion"},"Ingresá los nombres del 11 titular y el DT:",-1)),$(v("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>S.value=t),onKeyup:x(A,["enter"]),class:"input-jugador",disabled:c.value.value<=0||p.value,placeholder:"Escribe un nombre de jugador o DT..."},null,40,Y),[[q,S.value]]),b.value?(u(),i("p",G,f(b.value),1)):h("",!0),v("div",Q,[v("div",X,[z(f(r.value.DT||"DT")+" ",1),r.value.DT?h("",!0):(u(),i("button",{key:0,class:"pista-boton",onClick:a[1]||(a[1]=t=>k("DT"))}," 🔍 "))]),(u(!0),i(N,null,C(T.value,(t,l)=>(u(),i("div",{class:"linea",key:l},[(u(!0),i(N,null,C(t,(n,j)=>(u(),i("div",{key:j,class:H(["jugador",{adivinado:r.value[n]}])},[z(f(r.value[n]||n)+" ",1),r.value[n]?h("",!0):(u(),i("button",{key:0,class:"pista-boton",onClick:o=>k(n)}," 🔍 ",8,Z))],2))),128))]))),128))])])):h("",!0),g.value?(u(),i("div",ee,[v("p",null,f(I.value),1)])):h("",!0)]))}};export{ne as default};
