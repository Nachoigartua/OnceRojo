import{b as l,p as x,d as P,q as H,c as i,a as m,e as D,t as g,i as V,v as A,s as R,h as z,F as N,r as C,o as u,n as B}from"./index-CI9eUJUu.js";const J={class:"contenedor"},G={class:"titulo"},K={key:0},L={class:"subtitulo"},U=["disabled"],W={key:0,class:"mensaje-error"},Q={class:"pizarra"},X={class:"dt-container"},Y=["onClick"],Z={key:1,class:"cartel-mensaje"},te={__name:"El11Historico",setup(ee){const c=l({}),_=l([]),n=l({}),b=l(""),d=l(60),O=l("formacion"),p=l(!1),j=l([]),y=l(""),v=l(!1),f=l("");let h;const E=x(()=>{const a=Math.floor(d.value/60),e=d.value%60;return`${String(a).padStart(2,"0")}:${String(e).padStart(2,"0")}`});function S(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}function w(a){const e=a.map(t=>t.posicion),o=e.filter(t=>t==="POR"),r=e.filter(t=>t.startsWith("DF")).sort((t,k)=>t==="DFI"?-1:k==="DFI"||t==="DFD"?1:k==="DFD"?-1:0),s=e.filter(t=>t.startsWith("MC"));return[e.filter(t=>["EI","DC","ED"].includes(t)),s,r,o]}P(async()=>{try{const a=localStorage.getItem("ultimaPartida"),o=new Date().toISOString().split("T")[0],r=JSON.parse(localStorage.getItem("nombresAdivinados")||"{}");n.value=r;const s=localStorage.getItem("juegoFinalizado")==="true",T=await fetch("/OnceRojo/onceHistorico.json").then(t=>t.json());if(c.value=T[o]||{equipo:"",dt:"",formacion:[],esquema:"4-3-3",tiempo_limite:60},j.value=w(c.value.formacion),s){p.value=!0,y.value="El juego ya ha finalizado.",v.value=!0;return}if(a===o){const t=q();y.value=`Vuelve a jugar en ${t}`,v.value=!0;return}d.value=c.value.tiempo_limite||60,_.value=[...c.value.formacion.map(t=>({nombre:S(t.nombre),posicion:t.posicion})),{nombre:S(c.value.dt),posicion:"DT"}],$()}catch(a){console.error("Error al cargar los datos:",a)}});function I(a){y.value=a,v.value=!0,setTimeout(()=>{v.value=!1},5e3)}function M(){if(p.value)return;const a=S(b.value.trim());if(!a)return;const e=_.value.find(o=>{const r=o.nombre,s=S(o.nombre.split(" ").pop());return r===a||s===a});e&&!n.value[e.posicion]?(n.value[e.posicion]=e.nombre,b.value="",f.value="",localStorage.setItem("nombresAdivinados",JSON.stringify(n.value)),Object.keys(n.value).length===_.value.length&&(I("Â¡Felicidades! Has completado el 11 inicial."),p.value=!0,localStorage.setItem("juegoFinalizado","true"),clearInterval(h))):(f.value="Nombre incorrecto o ya ingresado.",setTimeout(()=>f.value="",3e3))}function $(){h=setInterval(()=>{if(d.value--,d.value<=0){clearInterval(h),p.value=!0,localStorage.setItem("nombresAdivinados",JSON.stringify(n.value));const a=new Date().toISOString().split("T")[0];localStorage.setItem("ultimaPartida",a),Object.keys(n.value).length===_.value.length?I("Â¡Felicidades! Has completado el 11 inicial."):I("Se acabÃ³ el tiempo. Intenta nuevamente maÃ±ana.")}},1e3)}H(()=>{h&&clearInterval(h),d.value=60,p.value=!1,n.value={},v.value=!1,f.value="",b.value=""});function q(){const a=new Date,e=new Date(a);e.setHours(24,0,0,0);const o=e-a,r=Math.floor(o/(1e3*60*60)),s=Math.floor(o%(1e3*60*60)/(1e3*60));return`${r}h ${s}m`}function F(a){let e="";if(a==="DT")e=c.value.dt.pista;else{const o=c.value.formacion.find(r=>r.posicion===a);e=(o==null?void 0:o.pista)||"No hay pista disponible para esta posiciÃ³n."}I(e)}return(a,e)=>(u(),i("div",J,[m("h1",G,g(c.value.equipo||"Nombre del partido no disponible"),1),O.value==="formacion"?(u(),i("div",K,[m("p",L,"Tiempo restante: "+g(E.value),1),e[2]||(e[2]=m("p",{class:"indicacion"},"IngresÃ¡ los nombres del 11 titular y el DT:",-1)),V(m("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),onKeyup:R(M,["enter"]),class:"input-jugador",disabled:d.value.value<=0||v.value||p.value,placeholder:"Escribe un nombre de jugador o DT..."},null,40,U),[[A,b.value]]),f.value?(u(),i("p",W,g(f.value),1)):D("",!0),m("div",Q,[m("div",X,[z(g(n.value.DT||"DT")+" ",1),n.value.DT?D("",!0):(u(),i("button",{key:0,class:"pista-boton",onClick:e[1]||(e[1]=o=>F("DT"))}," ğŸ” "))]),(u(!0),i(N,null,C(j.value,(o,r)=>(u(),i("div",{class:"linea",key:r},[(u(!0),i(N,null,C(o,(s,T)=>(u(),i("div",{key:T,class:B(["jugador",{adivinado:n.value[s]}])},[z(g(n.value[s]||s)+" ",1),n.value[s]?D("",!0):(u(),i("button",{key:0,class:"pista-boton",onClick:t=>F(s)}," ğŸ” ",8,Y))],2))),128))]))),128))])])):D("",!0),v.value?(u(),i("div",Z,[m("p",null,g(y.value),1)])):D("",!0)]))}};export{te as default};
