import{_ as z,b as a,d as G,c as n,a as r,t as l,n as S,F as U,r as Y,h as M,k as K,o as c}from"./index-BP0zXZfI.js";const Q={class:"preguntas-respuestas-wrapper text-white"},W={key:0,class:"text-center"},X={class:"text-warning"},Z={class:"mt-4"},ee={class:"mb-3"},te={key:1,class:"resultado-final"},ae={key:0},se={key:1},re={key:2},oe={class:"pregunta mb-4"},ne={class:"opciones-container"},le=["onClick"],ce={class:"contador mt-4"},ue={class:"text-warning"},ie={__name:"PreguntasRespuestas",setup(de){const k=a([]),I=a([]),d=a(null),g=a(0),p=a(10),m=a(!1),_=a(!1),f=a(0),b=a(!1),w=a(!1),P=a(""),u=a(null),v=a(""),C=a(!1);let T=null;const j=()=>{const e=new Date;return e.setUTCHours(3,0,0,0),e.toISOString().slice(0,10)},R=()=>{const e=new Date,t=new Date;t.setUTCHours(27,0,0,0);const o=t-e,s=String(Math.floor(o/(1e3*60*60))).padStart(2,"0"),i=String(Math.floor(o/(1e3*60)%60)).padStart(2,"0"),h=String(Math.floor(o/1e3%60)).padStart(2,"0");P.value=`${s}:${i}:${h}`},N=async()=>{try{const e=await fetch("/OnceRojo/ruleta_rapida_independiente_10dias.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=(await e.json()).flat().filter(s=>s.pregunta&&s.respuesta_correcta&&Array.isArray(s.posibles_respuestas)&&s.posibles_respuestas.length>=2);if(o.length<3)throw new Error("No hay suficientes preguntas v√°lidas.");k.value=o,C.value=!1,O()}catch(e){console.error("Error al cargar las preguntas:",e),C.value=!0}},O=()=>{const e=[...k.value].sort(()=>.5-Math.random());I.value=e.slice(0,3),g.value=0,f.value=0,m.value=!1,$()},$=()=>{d.value=I.value[g.value],b.value=!1,K(()=>{document.querySelectorAll(".opcion-btn").forEach(t=>{t.classList.remove("bg-success","bg-danger","text-white")})}),F()},B=async e=>{if(b.value)return;b.value=!0,x(),document.querySelectorAll(".opcion-btn").forEach(s=>{const i=s.innerText.trim();i===d.value.respuesta_correcta?s.classList.add("bg-success","text-white"):i===e&&s.classList.add("bg-danger","text-white")}),await H(1500),e===d.value.respuesta_correcta?(f.value++,g.value<2?(g.value++,$()):y()):y();const o=j();localStorage.setItem("pregunta-jugada-"+o,JSON.stringify(d.value)),localStorage.setItem("respuesta-jugada-"+o,e)},F=()=>{p.value=10,T=setInterval(()=>{p.value--,p.value<=0&&(x(),y())},1e3)},x=()=>{clearInterval(T)},y=()=>{x(),m.value=!0,_.value=f.value===3},H=e=>new Promise(t=>setTimeout(t,e)),V=()=>{const e=j();w.value=localStorage.getItem("pregunta-jugada-"+e)!==null,w.value?(u.value=JSON.parse(localStorage.getItem("pregunta-jugada-"+e)),v.value=localStorage.getItem("respuesta-jugada-"+e),R(),setInterval(R,1e3)):N()};return G(()=>{V()}),(e,t)=>{var o,s,i,h,A,E,L,D;return c(),n("div",Q,[t[3]||(t[3]=r("h1",{class:"titulo mb-4"},"‚ùì Preguntas y Respuestas",-1)),w.value?(c(),n("div",W,[r("h2",X,"Vuelve a intentarlo en "+l(P.value),1),r("div",Z,[t[0]||(t[0]=r("h3",{class:"pregunta"},"√öltima pregunta:",-1)),r("p",ee,l((o=u.value)==null?void 0:o.pregunta),1),r("button",{class:S(["btn btn-light opcion-btn",{"bg-success text-white":v.value===((s=u.value)==null?void 0:s.respuesta_correcta),"bg-danger text-white":v.value!==((i=u.value)==null?void 0:i.respuesta_correcta)}]),disabled:""},l(v.value),3),r("p",{class:S(["mt-3",v.value===((h=u.value)==null?void 0:h.respuesta_correcta)?"text-success":"text-danger"])},l(v.value===((A=u.value)==null?void 0:A.respuesta_correcta)?"‚úÖ Correcto":`‚ùå Incorrecto. La respuesta correcta era: ${(E=u.value)==null?void 0:E.respuesta_correcta}`),3)])])):m.value?(c(),n("div",te,[r("h2",{class:S(_.value?"text-success":"text-danger")},l(_.value?"üéâ ¬°Ganaste!":"‚ùå Perdiste"),3),_.value?(c(),n("p",ae,"¬°Respondiste correctamente las 3 preguntas!")):(c(),n("p",se,"Intenta nuevamente ma√±ana para ganar."))])):(c(),n("div",re,[r("h2",oe,l((L=d.value)==null?void 0:L.pregunta),1),r("div",ne,[(c(!0),n(U,null,Y((D=d.value)==null?void 0:D.posibles_respuestas,(J,q)=>(c(),n("button",{key:q,class:"btn btn-light opcion-btn",onClick:ve=>B(J)},l(J),9,le))),128))]),r("div",ce,[r("p",null,[t[1]||(t[1]=M("‚è≥ Tiempo restante: ")),r("span",ue,l(p.value),1),t[2]||(t[2]=M(" segundos"))])])]))])}}},pe=z(ie,[["__scopeId","data-v-68a714d9"]]);export{pe as default};
