import{_ as q,r as s,e as G,c as n,a as r,t as l,n as I,F as U,d as z,j as A,k as Y,o as c}from"./index-Bd_UDzU2.js";const K={class:"preguntas-respuestas-wrapper text-white"},Q={key:0,class:"text-center"},W={class:"text-warning"},X={class:"mt-4"},Z={class:"mb-3"},ee={key:1,class:"resultado-final"},te={key:0},ae={key:1},se={key:2},oe={class:"pregunta mb-4"},re={class:"opciones-container"},ne=["onClick"],le={class:"contador mt-4"},ce={class:"text-warning"},ue={__name:"PreguntasRespuestas",setup(ie){const J=s([]),k=s([]),v=s(null),g=s(0),p=s(10),S=s(!1),_=s(!1),w=s(0),x=s(!1),y=s(!1),T=s(""),u=s(null),d=s(""),j=s(!1);let C=null;const m=()=>{const e=new Date;return e.setUTCHours(3,0,0,0),e.toISOString().slice(0,10)},P=()=>{const e=new Date,t=new Date;t.setUTCHours(27,0,0,0);const o=t-e,a=String(Math.floor(o/(1e3*60*60))).padStart(2,"0"),i=String(Math.floor(o/(1e3*60)%60)).padStart(2,"0"),b=String(Math.floor(o/1e3%60)).padStart(2,"0");T.value=`${a}:${i}:${b}`},N=async()=>{try{const e=await fetch("/OnceRojo/triviaRoja.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),o=m(),a=t[o];if(!Array.isArray(a)||a.length<3)throw new Error("No hay suficientes preguntas v√°lidas para hoy.");J.value=a,k.value=[...a],g.value=0,w.value=0,S.value=!1,j.value=!1,$()}catch(e){console.error("Error al cargar las preguntas:",e),j.value=!0}},$=()=>{v.value=k.value[g.value],x.value=!1,Y(()=>{document.querySelectorAll(".opcion-btn").forEach(t=>{t.classList.remove("bg-success","bg-danger","text-white")})});const e=`tiempo-inicio-${m()}-${g.value}`;localStorage.getItem(e)||localStorage.setItem(e,Date.now().toString()),H()},H=()=>{h();const e=`tiempo-inicio-${m()}-${g.value}`,t=parseInt(localStorage.getItem(e)),o=Date.now(),a=Math.floor((o-t)/1e3);if(p.value=Math.max(10-a,0),p.value===0){f();return}C=setInterval(()=>{p.value--,p.value<=0&&(h(),f())},1e3)},h=()=>{clearInterval(C)},O=async e=>{if(x.value)return;x.value=!0,h(),document.querySelectorAll(".opcion-btn").forEach(a=>{const i=a.innerText.trim();i===v.value.respuesta_correcta?a.classList.add("bg-success","text-white"):i===e&&a.classList.add("bg-danger","text-white")}),await B(1500),e===v.value.respuesta_correcta?(w.value++,g.value<2?(g.value++,$()):f()):f();const o=m();localStorage.setItem("pregunta-jugada-"+o,JSON.stringify(v.value)),localStorage.setItem("respuesta-jugada-"+o,e)},f=()=>{h(),S.value=!0,_.value=w.value===3},B=e=>new Promise(t=>setTimeout(t,e)),F=()=>{const e=m();y.value=localStorage.getItem("pregunta-jugada-"+e)!==null,y.value?(u.value=JSON.parse(localStorage.getItem("pregunta-jugada-"+e)),d.value=localStorage.getItem("respuesta-jugada-"+e),P(),setInterval(P,1e3)):N()};return G(()=>{F()}),(e,t)=>{var o,a,i,b,R,D,E,L;return c(),n("div",K,[t[3]||(t[3]=r("h1",{class:"titulo mb-4"},"‚ùì Preguntas y Respuestas",-1)),y.value?(c(),n("div",Q,[r("h2",W,"Vuelve a intentarlo en "+l(T.value),1),r("div",X,[t[0]||(t[0]=r("h3",{class:"pregunta"},"√öltima pregunta:",-1)),r("p",Z,l((o=u.value)==null?void 0:o.pregunta),1),r("button",{class:I(["btn btn-light opcion-btn",{"bg-success text-white":d.value===((a=u.value)==null?void 0:a.respuesta_correcta),"bg-danger text-white":d.value!==((i=u.value)==null?void 0:i.respuesta_correcta)}]),disabled:""},l(d.value),3),r("p",{class:I(["mt-3",d.value===((b=u.value)==null?void 0:b.respuesta_correcta)?"text-success":"text-danger"])},l(d.value===((R=u.value)==null?void 0:R.respuesta_correcta)?"‚úÖ Correcto":`‚ùå Incorrecto. La respuesta correcta era: ${(D=u.value)==null?void 0:D.respuesta_correcta}`),3)])])):S.value?(c(),n("div",ee,[r("h2",{class:I(_.value?"text-success":"text-danger")},l(_.value?"üéâ ¬°Ganaste!":"‚ùå Perdiste"),3),_.value?(c(),n("p",te,"¬°Respondiste correctamente las 3 preguntas!")):(c(),n("p",ae,"Intenta nuevamente ma√±ana para ganar."))])):(c(),n("div",se,[r("h2",oe,l((E=v.value)==null?void 0:E.pregunta),1),r("div",re,[(c(!0),n(U,null,z((L=v.value)==null?void 0:L.posibles_respuestas,(M,V)=>(c(),n("button",{key:V,class:"btn btn-light opcion-btn",onClick:ve=>O(M)},l(M),9,ne))),128))]),r("div",le,[r("p",null,[t[1]||(t[1]=A("‚è≥ Tiempo restante: ")),r("span",ce,l(p.value),1),t[2]||(t[2]=A(" segundos"))])])]))])}}},de=q(ue,[["__scopeId","data-v-74227d3c"]]);export{de as default};
