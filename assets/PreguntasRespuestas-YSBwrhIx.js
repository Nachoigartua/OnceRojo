import{o as m,c as q}from"./horaArgentina-wJwX-x9z.js";import{_ as G,r as a,e as z,c as n,a as o,t as l,n as I,F as Y,d as K,j as J,k as Q,o as c}from"./index-C6TmXILP.js";const U={class:"preguntas-respuestas-wrapper text-white"},W={key:0,class:"text-center"},X={class:"text-warning"},Z={class:"mt-4"},ee={class:"mb-3"},te={key:1,class:"resultado-final"},ae={key:0},se={key:1},oe={key:2},re={class:"pregunta mb-4"},ne={class:"opciones-container"},le=["onClick"],ce={class:"contador mt-4"},ue={class:"text-warning"},ie={__name:"PreguntasRespuestas",setup(ve){const N=a([]),S=a([]),i=a(null),v=a(0),p=a(10),b=a(!1),_=a(!1),x=a(0),y=a(!1),w=a(!1),k=a(""),u=a(null),g=a(""),T=a(!1);let j=null;const P=()=>{k.value=q()},M=async()=>{try{const e=await fetch("/OnceRojo/triviaRoja.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),r=m(),s=t[r];if(!Array.isArray(s)||s.length<3)throw new Error("No hay suficientes preguntas v√°lidas para hoy.");N.value=s,S.value=[...s],v.value=0,x.value=0,b.value=!1,T.value=!1,R()}catch(e){console.error("Error al cargar las preguntas:",e),T.value=!0}},R=()=>{i.value=S.value[v.value],y.value=!1,Q(()=>{document.querySelectorAll(".opcion-btn").forEach(t=>{t.classList.remove("bg-success","bg-danger","text-white")})});const e=`tiempo-inicio-${m()}-${v.value}`;localStorage.getItem(e)||localStorage.setItem(e,Date.now().toString()),B()},B=()=>{h();const e=`tiempo-inicio-${m()}-${v.value}`,t=parseInt(localStorage.getItem(e)),r=Date.now(),s=Math.floor((r-t)/1e3);if(p.value=Math.max(10-s,0),p.value===0){f();return}j=setInterval(()=>{p.value--,p.value<=0&&(h(),f())},1e3)},h=()=>{clearInterval(j)},F=async e=>{if(y.value)return;y.value=!0,h(),document.querySelectorAll(".opcion-btn").forEach(s=>{const d=s.innerText.trim();d===i.value.respuesta_correcta?s.classList.add("bg-success","text-white"):d===e&&s.classList.add("bg-danger","text-white")}),await H(1500),e===i.value.respuesta_correcta?(x.value++,v.value<2?(v.value++,R()):f()):f();const r=m();localStorage.setItem("pregunta-jugada-"+r,JSON.stringify(i.value)),localStorage.setItem("respuesta-jugada-"+r,e)},f=()=>{h(),b.value=!0,_.value=x.value===3},H=e=>new Promise(t=>setTimeout(t,e)),O=()=>{const e=m();w.value=localStorage.getItem("pregunta-jugada-"+e)!==null,w.value?(u.value=JSON.parse(localStorage.getItem("pregunta-jugada-"+e)),g.value=localStorage.getItem("respuesta-jugada-"+e),P(),setInterval(P,1e3)):M()};return z(()=>{O()}),(e,t)=>{var r,s,d,C,$,A,E,L;return c(),n("div",U,[t[3]||(t[3]=o("h1",{class:"titulo mb-4"},"‚ùì Preguntas y Respuestas",-1)),w.value?(c(),n("div",W,[o("h2",X,"Vuelve a intentarlo en "+l(k.value),1),o("div",Z,[t[0]||(t[0]=o("h3",{class:"pregunta"},"√öltima pregunta:",-1)),o("p",ee,l((r=u.value)==null?void 0:r.pregunta),1),o("button",{class:I(["btn btn-light opcion-btn",{"bg-success text-white":g.value===((s=u.value)==null?void 0:s.respuesta_correcta),"bg-danger text-white":g.value!==((d=u.value)==null?void 0:d.respuesta_correcta)}]),disabled:""},l(g.value),3),o("p",{class:I(["mt-3",g.value===((C=u.value)==null?void 0:C.respuesta_correcta)?"text-success":"text-danger"])},l(g.value===(($=u.value)==null?void 0:$.respuesta_correcta)?"‚úÖ Correcto":`‚ùå Incorrecto. La respuesta correcta era: ${(A=u.value)==null?void 0:A.respuesta_correcta}`),3)])])):b.value?(c(),n("div",te,[o("h2",{class:I(_.value?"text-success":"text-danger")},l(_.value?"üéâ ¬°Ganaste!":"‚ùå Perdiste"),3),_.value?(c(),n("p",ae,"¬°Respondiste correctamente las 3 preguntas!")):(c(),n("p",se,"Intenta nuevamente ma√±ana para ganar."))])):(c(),n("div",oe,[o("h2",re,l((E=i.value)==null?void 0:E.pregunta),1),o("div",ne,[(c(!0),n(Y,null,K((L=i.value)==null?void 0:L.posibles_respuestas,(D,V)=>(c(),n("button",{key:V,class:"btn btn-light opcion-btn",onClick:ge=>F(D)},l(D),9,le))),128))]),o("div",ce,[o("p",null,[t[1]||(t[1]=J("‚è≥ Tiempo restante: ")),o("span",ue,l(p.value),1),t[2]||(t[2]=J(" segundos"))])])]))])}}},me=G(ie,[["__scopeId","data-v-387bc10a"]]);export{me as default};
