import{_ as E,r as v,e as L,i as N,c as l,a as n,t as h,F as m,d as _,n as y,b as $,o as u}from"./index-CWLAntZ9.js";const B={class:"rodle-container text-white text-center px-3"},U={key:0},F={class:"reloj"},z={class:"grilla mt-4"},M={class:"mt-4"},O={key:1},T={class:"grilla"},J={key:0,class:"mt-4"},V={key:2},H={__name:"Rodle",setup(P){const c=v([]),r=v(""),g=v(!1),i=v(!1),S=v(!1),k=v(""),d=v([]),f=()=>{const t=new Date;return t.setUTCHours(3,0,0,0),t.toISOString().slice(0,10)},C=()=>{const t=new Date,e=new Date(t.toLocaleString("en-US",{timeZone:"America/Argentina/Buenos_Aires"})),o=new Date(e);o.setHours(24,0,0,0);const s=o-e,a=Math.floor(s/(1e3*60*60)),p=Math.floor(s%(1e3*60*60)/(1e3*60)),w=Math.floor(s%(1e3*60)/1e3);k.value=`${String(a).padStart(2,"0")}:${String(p).padStart(2,"0")}:${String(w).padStart(2,"0")}`},D=(t,e)=>{const o=[],s=Array(e.length).fill(!1);for(let a=0;a<e.length;a++)t[a]===e[a]?(o.push({char:t[a],color:"verde"}),s[a]=!0):o.push(null);for(let a=0;a<e.length;a++){if(o[a])continue;const p=e.split("").findIndex((w,A)=>w===t[a]&&!s[A]);p!==-1?(o[a]={char:t[a],color:"naranja"},s[p]=!0):o[a]={char:t[a],color:"gris"}}return o},R=()=>{const t=d.value.join("").toLowerCase();if(t.length!==r.value.length)return;const e=D(t,r.value);c.value.push(e),t===r.value?(i.value=!0,g.value=!0):c.value.length>=5&&(g.value=!0),localStorage.setItem("rodle-jugado-"+f(),"true"),localStorage.setItem("rodle-intentos-"+f(),JSON.stringify(c.value)),localStorage.setItem("rodle-correcto-"+f(),i.value.toString()),d.value=[]},j=t=>{if(g.value)return;const e=t.key.toLowerCase();/^[a-z√±√°√©√≠√≥√∫√º]$/.test(e)&&d.value.length<r.value.length?d.value.push(e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")):t.key==="Backspace"?d.value.pop():t.key==="Enter"&&d.value.length===r.value.length&&R()},x=(t,e)=>c.value[t]&&c.value[t][e]?c.value[t][e].color:"",I=(t,e)=>{var o,s,a;return c.value[t]?((s=(o=c.value[t][e])==null?void 0:o.char)==null?void 0:s.toUpperCase())||"":t===c.value.length&&((a=d.value[e])==null?void 0:a.toUpperCase())||""};return L(async()=>{const t=f();S.value=localStorage.getItem("rodle-jugado-"+t)==="true";try{const o=await(await fetch("/OnceRojo/Rodle.json")).json();o[t]&&(r.value=o[t].toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}catch(e){console.error("Error cargando Rodle.json:",e)}if(S.value){C(),setInterval(C,1e3);const e=localStorage.getItem("rodle-intentos-"+t),o=localStorage.getItem("rodle-correcto-"+t);e&&(c.value=JSON.parse(e),g.value=!0,i.value=o==="true")}window.addEventListener("keydown",j)}),N(()=>{window.removeEventListener("keydown",j)}),(t,e)=>(u(),l("div",B,[e[3]||(e[3]=n("h2",{class:"titulo-juego mb-4 animate-slide-in"},"üü• Rodle üü•",-1)),S.value&&r.value?(u(),l("div",U,[e[0]||(e[0]=n("p",{class:"fs-5"},"Ya jugaste hoy. Volv√© en:",-1)),n("h3",F,h(k.value),1),n("div",z,[(u(),l(m,null,_(5,o=>n("div",{key:o,class:"fila"},[(u(!0),l(m,null,_(r.value.length,s=>(u(),l("div",{key:s,class:y(["letra",x(o-1,s-1)])},h(I(o-1,s-1)),3))),128))])),64))]),n("div",M,[n("p",{class:y(["fs-5",i.value?"text-success":"text-danger"])},h(i.value?"‚úÖ ¬°Correcto!":`‚ùå Era: ${r.value}`),3)])])):r.value?(u(),l("div",O,[e[1]||(e[1]=n("p",{class:"mb-3 fs-5"},"Adivin√° el apellido del jugador üî§",-1)),n("div",T,[(u(),l(m,null,_(5,o=>n("div",{key:o,class:"fila"},[(u(!0),l(m,null,_(r.value.length,s=>(u(),l("div",{key:s,class:y(["letra",x(o-1,s-1)])},h(I(o-1,s-1)),3))),128))])),64))]),g.value?(u(),l("div",J,[n("p",{class:y(["fs-5",i.value?"text-success":"text-danger"])},h(i.value?"‚úÖ ¬°Correcto!":`‚ùå Era: ${r.value}`),3)])):$("",!0)])):(u(),l("div",V,e[2]||(e[2]=[n("p",{class:"text-warning"},"No hay Rodle cargado para hoy.",-1)])))]))}},K=E(H,[["__scopeId","data-v-5191c3f0"]]);export{K as default};
