import{_ as z,b as u,d as A,c as o,a as s,e as d,n as O,F as j,r as S,t as c,o as r,l as B,m as E}from"./index-CaxSGM_9.js";const F={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},P=["onDragstart","onDrop"],U={class:"posicion-numero"},q={class:"info-jugador text-center"},G={key:0},H={key:0},L=["src","alt"],Y=["src","alt"],K={class:"mb-1"},Q={key:0,class:"mb-0"},W={key:1,class:"text-center"},X={class:"plantilla-entregada mt-4"},Z={class:"piramide-container"},ee={class:"posicion-numero"},te={class:"info-jugador text-center"},ae={key:0},ne=["src","alt"],le={key:2,class:"vidas mt-4"},se={class:"text-center"},oe=["disabled"],re={__name:"VentaJugadores",setup(ie){const x=u([]),J=u([]),v=u(null),l=u(Array(10).fill(null)),p=u(null),h=u(""),_=u(""),y=u(5),b=u(!1),f=u(!1),T=u(""),g=u([]),$=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],M=t=>({width:`${160-t*10}px`,height:"70px",margin:"0 5px"}),w=t=>`/OnceRojo/${t.replace(/^\/+/,"")}`,V=t=>{let e=t.length,a;for(;e;)a=Math.floor(Math.random()*e--),[t[e],t[a]]=[t[a],t[e]];return t};function k(){const t=new Date,e=new Date(t.getTime()+t.getTimezoneOffset()*6e4),a=new Date(e.getTime()-3*60*6e4),i=new Date(a);i.setHours(24,0,0,0);const n=i-a,m=Math.floor(n/(1e3*60*60)),D=Math.floor(n%(1e3*60*60)/(1e3*60));T.value=`${m}h ${D}m`}A(async()=>{const t=new Date().toISOString().split("T")[0];if(localStorage.getItem("topVentasJugado")===t){f.value=!0,k();const a=localStorage.getItem("plantillaEntregada");a&&(g.value=JSON.parse(a));return}try{const a=await fetch("/OnceRojo/jugadores_ventas.json").then(n=>n.json()),i=V(a).slice(0,10);J.value=[...i].sort((n,m)=>m.coste-n.coste),x.value=V(i),v.value=x.value.shift()}catch(a){console.error("‚ùå Error al cargar jugadores:",a)}});const N=t=>{p.value=null,t.dataTransfer.setData("text/plain",JSON.stringify(v.value))},C=t=>{const e=l.value[t];e&&(p.value=t,event.dataTransfer.setData("text/plain",JSON.stringify(e)))},I=t=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),p.value===null){const e=l.value[t];l.value[t]=v.value,v.value=e||(x.value.length>0?x.value.shift():null)}else{const e=l.value[t];l.value[t]=l.value[p.value],l.value[p.value]=e,p.value=null}},R=()=>{let t=0;l.value.forEach((e,a)=>{var i;e&&e.coste===((i=J.value[a])==null?void 0:i.coste)&&t++}),y.value--,l.value.every(e=>e!==null)&&t===10?(h.value="‚úÖ ¬°Perfecto! Ordenaste correctamente los 10 jugadores.",_.value="text-success bg-light",b.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(l.value)),g.value=[...l.value],k(),f.value=!0):y.value===0?(h.value="‚ùå Perdiste. Te quedaste sin vidas.",_.value="text-danger bg-light",b.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(l.value)),g.value=[...l.value],k(),f.value=!0):(h.value=`Ordenaste correctamente ${t}/10 jugadores.`,_.value="text-warning bg-light")};return(t,e)=>(r(),o("div",F,[e[4]||(e[4]=s("h1",{class:"titulo mb-5 text-center"},"üèÜ Top Ventas de Jugadores",-1)),l.value.some(a=>a!==null)||!f.value?(r(),o("div",{key:0,class:O(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":l.value.every(a=>a!==null)}])},[s("div",{class:O(["piramide-container",{"centrar-piramide":l.value.every(a=>a!==null)}])},[(r(),o(j,null,S($,(a,i)=>s("div",{key:i,class:"fila d-flex justify-content-center mb-3"},[(r(!0),o(j,null,S(a,(n,m)=>(r(),o("div",{key:m,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:E(M(i)),draggable:"true",onDragstart:D=>C(n.index),onDragover:e[0]||(e[0]=B(()=>{},["prevent"])),onDrop:D=>I(n.index)},[s("span",U,c(n.index+1),1),s("div",q,[l.value[n.index]?(r(),o("div",G,[s("strong",null,c(l.value[n.index].nombre),1),e[1]||(e[1]=s("br",null,null,-1)),b.value?(r(),o("span",H,"üí∞ $"+c(l.value[n.index].coste)+"M",1)):d("",!0)])):d("",!0)]),l.value[n.index]?(r(),o("img",{key:0,src:w(l.value[n.index].imagen),alt:l.value[n.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,L)):d("",!0)],44,P))),128))])),64))],2),v.value?(r(),o("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:N,style:{width:"200px"}},[s("img",{src:w(v.value.imagen),alt:v.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,Y),s("h6",K,c(v.value.nombre),1),b.value?(r(),o("p",Q,"üí∞ $"+c(v.value.coste)+"M",1)):d("",!0)],32)):d("",!0)],2)):(r(),o("div",W,[e[3]||(e[3]=s("h3",null,"üéÆ Ya jugaste hoy",-1)),s("p",null,"Vuelve a jugar en "+c(T.value),1),s("div",X,[s("div",Z,[(r(),o(j,null,S($,(a,i)=>s("div",{key:i,class:"fila d-flex justify-content-center mb-3"},[(r(!0),o(j,null,S(a,(n,m)=>(r(),o("div",{key:m,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:E(M(i))},[s("span",ee,c(n.index+1),1),s("div",te,[g.value[n.index]?(r(),o("div",ae,[s("strong",null,c(g.value[n.index].nombre),1),e[2]||(e[2]=s("br",null,null,-1)),s("span",null,"üí∞ $"+c(g.value[n.index].coste)+"M",1)])):d("",!0)]),g.value[n.index]?(r(),o("img",{key:0,src:w(g.value[n.index].imagen),alt:g.value[n.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,ne)):d("",!0)],4))),128))])),64))])])])),f.value?d("",!0):(r(),o("div",le,[s("p",se,"‚ù§Ô∏è Vidas restantes: "+c(y.value),1)])),f.value?d("",!0):(r(),o("button",{key:3,class:"btn btn-light mt -1",onClick:R,disabled:y.value===0||l.value.includes(null)}," Enviar ",8,oe)),h.value?(r(),o("div",{key:4,class:O(["resultado mt-4 p-3 rounded text-center",_.value])},[s("h3",null,c(h.value),1)],2)):d("",!0)]))}},ce=z(re,[["__scopeId","data-v-ba6667e5"]]);export{ce as default};
