import{_ as I,b as i,d as N,c as n,a as l,e as d,t as v,n as y,F as D,r as J,o,l as P,m as V}from"./index-BP0zXZfI.js";const R={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},B={key:0,class:"text-center"},z={class:"text-white"},U=["onDrop"],q={class:"posicion-numero"},F={class:"info-jugador text-center"},L={key:0},Y={key:0},H=["src","alt"],Z=["src","alt"],G={class:"mb-1"},K={class:"mb-0"},Q={key:1,class:"vidas mt-4"},W={class:"text-center"},X=["disabled"],ee={__name:"VentaJugadores",setup(te){const p=i([]),S=i([]),u=i(null),s=i(Array(10).fill(null)),m=i(null),h=i(""),f=i(""),x=i(5),g=i(!1),w=i(""),_=i(!1),O=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],T=t=>({width:`${160-t*10}px`,height:"70px",margin:"0 5px"}),$=()=>{const t=new Date,e=new Date(t.toLocaleString("en-US",{timeZone:"America/Argentina/Buenos_Aires"})),a=new Date(e);a.setHours(24,0,0,0);const c=a-e,r=Math.floor(c/(1e3*60*60)),b=Math.floor(c%(1e3*60*60)/(1e3*60));w.value=`${r}h ${b}m`},k=t=>`/${t.replace(/^\/+/,"")}`,M=()=>{const t=new Date().toISOString().split("T")[0],e=localStorage.getItem("ultimoJuego"),a=localStorage.getItem("estadoPiramide");e===t?(g.value=!0,$(),a&&(s.value=JSON.parse(a))):(localStorage.removeItem("estadoPiramide"),localStorage.removeItem("ultimoJuego"))};N(async()=>{if(M(),!g.value)try{const t=await fetch("/OnceRojo/jugadores_ventas.json").then(a=>a.json()),e=j(t).slice(0,10);S.value=[...e].sort((a,c)=>c.coste-a.coste),p.value=j(e),u.value=p.value.shift()}catch(t){console.error("‚ùå Error al cargar jugadores:",t)}});const j=t=>{let e=t.length,a;for(;e;)a=Math.floor(Math.random()*e--),[t[e],t[a]]=[t[a],t[e]];return t},A=t=>{m.value=null,t.dataTransfer.setData("text/plain",JSON.stringify(u.value))},C=t=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),m.value===null){const e=s.value[t];s.value[t]=u.value,u.value=e||(p.value.length>0?p.value.shift():null)}else{const e=s.value[t];s.value[t]=s.value[m.value],s.value[m.value]=e,m.value=null}},E=()=>{let t=0;s.value.forEach((e,a)=>{var c;e&&e.coste===((c=S.value[a])==null?void 0:c.coste)&&t++}),x.value--,s.value.every(e=>e!==null)&&t===10?(h.value="‚úÖ ¬°Perfecto! Ordenaste correctamente los 10 jugadores.",f.value="text-success bg-light",_.value=!0):x.value===0?(h.value="‚ùå Perdiste. Te quedaste sin vidas.",f.value="text-danger bg-light",_.value=!0):(h.value=`Ordenaste correctamente ${t}/10 jugadores.`,f.value="text-white bg-light"),localStorage.setItem("ultimoJuego",new Date().toISOString().split("T")[0]),localStorage.setItem("estadoPiramide",JSON.stringify(s.value))};return(t,e)=>(o(),n("div",R,[e[3]||(e[3]=l("h1",{class:"titulo mb-5 text-center"},"üèÜ Top Ventas de Jugadores",-1)),g.value?(o(),n("div",B,[l("h3",z,"Ya has jugado, espera "+v(w.value)+" para volver a jugar.",1),e[1]||(e[1]=l("p",{class:"text-light"},"Esta es la pir√°mide que entregaste:",-1))])):d("",!0),l("div",{class:y(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":s.value.every(a=>a!==null)}])},[l("div",{class:y(["piramide-container",{"centrar-piramide":s.value.every(a=>a!==null)}])},[(o(),n(D,null,J(O,(a,c)=>l("div",{key:c,class:"fila d-flex justify-content-center mb-3"},[(o(!0),n(D,null,J(a,(r,b)=>(o(),n("div",{key:b,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:V(T(c)),onDragover:e[0]||(e[0]=P(()=>{},["prevent"])),onDrop:ae=>C(r.index)},[l("span",q,v(r.index+1),1),l("div",F,[s.value[r.index]?(o(),n("div",L,[l("strong",null,v(s.value[r.index].nombre),1),e[2]||(e[2]=l("br",null,null,-1)),_.value?(o(),n("span",Y,"üí∞ $"+v(s.value[r.index].coste)+"M",1)):d("",!0)])):d("",!0)]),s.value[r.index]&&s.value[r.index].imagen?(o(),n("img",{key:0,src:k(s.value[r.index].imagen),alt:s.value[r.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,H)):d("",!0)],44,U))),128))])),64))],2),u.value&&!g.value?(o(),n("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:A,style:{width:"200px"}},[u.value.imagen?(o(),n("img",{key:0,src:k(u.value.imagen),alt:u.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,Z)):d("",!0),l("h6",G,v(u.value.nombre),1),l("p",K,"üí∞ $"+v(u.value.coste)+"M",1)],32)):d("",!0)],2),g.value?d("",!0):(o(),n("div",Q,[l("p",W,"‚ù§Ô∏è Vidas restantes: "+v(x.value),1)])),g.value?d("",!0):(o(),n("button",{key:2,class:"btn btn-light mt-4",onClick:E,disabled:x.value===0||s.value.includes(null)}," Enviar ",8,X)),h.value?(o(),n("div",{key:3,class:y(["resultado mt-4 p-3 rounded text-center",f.value])},[l("h3",null,v(h.value),1)],2)):d("",!0)]))}},le=I(ee,[["__scopeId","data-v-a5c936b7"]]);export{le as default};
