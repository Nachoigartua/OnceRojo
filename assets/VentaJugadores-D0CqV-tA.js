import{_ as R,b as i,d as z,c as l,a as r,e as d,n as j,F as O,r as J,t as v,o,l as A,m as I}from"./index-CI9eUJUu.js";const B={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},F=["onDragstart","onDrop"],P={class:"posicion-numero"},U={class:"info-jugador text-center"},q={key:0},H={key:0},L=["src","alt"],Y=["src","alt"],G={class:"mb-1"},K={key:0,class:"mb-0"},Q={key:1,class:"text-center"},W={key:2,class:"vidas mt-4"},X={class:"text-center"},Z=["disabled"],ee={__name:"VentaJugadores",setup(te){const f=i([]),D=i([]),c=i(null),n=i(Array(10).fill(null)),g=i(null),p=i(""),x=i(""),_=i(5),y=i(!1),m=i(!1),S=i(""),$=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],V=e=>({width:`${160-e*10}px`,height:"70px",margin:"0 5px"}),k=e=>`/OnceRojo/${e.replace(/^\/+/,"")}`,T=e=>{let t=e.length,a;for(;t;)a=Math.floor(Math.random()*t--),[e[t],e[a]]=[e[a],e[t]];return e};function b(){const e=new Date,t=new Date(e.getTime()+e.getTimezoneOffset()*6e4),a=new Date(t.getTime()-3*60*6e4),u=new Date(a);u.setHours(24,0,0,0);const s=u-a,h=Math.floor(s/(1e3*60*60)),w=Math.floor(s%(1e3*60*60)/(1e3*60));S.value=`${h}h ${w}m`}z(async()=>{const e=new Date().toISOString().split("T")[0];if(localStorage.getItem("topVentasJugado")===e){m.value=!0,b();return}try{const a=await fetch("/OnceRojo/jugadores_ventas.json").then(s=>s.json()),u=T(a).slice(0,10);D.value=[...u].sort((s,h)=>h.coste-s.coste),f.value=T(u),c.value=f.value.shift()}catch(a){console.error("‚ùå Error al cargar jugadores:",a)}});const M=e=>{g.value=null,e.dataTransfer.setData("text/plain",JSON.stringify(c.value))},C=e=>{const t=n.value[e];t&&(g.value=e,event.dataTransfer.setData("text/plain",JSON.stringify(t)))},E=e=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),g.value===null){const t=n.value[e];n.value[e]=c.value,c.value=t||(f.value.length>0?f.value.shift():null)}else{const t=n.value[e];n.value[e]=n.value[g.value],n.value[g.value]=t,g.value=null}},N=()=>{let e=0;n.value.forEach((t,a)=>{var u;t&&t.coste===((u=D.value[a])==null?void 0:u.coste)&&e++}),_.value--,n.value.every(t=>t!==null)&&e===10?(p.value="‚úÖ ¬°Perfecto! Ordenaste correctamente los 10 jugadores.",x.value="text-success bg-light",y.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),b(),m.value=!0):_.value===0?(p.value="‚ùå Perdiste. Te quedaste sin vidas.",x.value="text-danger bg-light",y.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),b(),m.value=!0):(p.value=`Ordenaste correctamente ${e}/10 jugadores.`,x.value="text-warning bg-light")};return(e,t)=>(o(),l("div",B,[t[3]||(t[3]=r("h1",{class:"titulo mb-5 text-center"},"üèÜ Top Ventas de Jugadores",-1)),n.value.some(a=>a!==null)||!m.value?(o(),l("div",{key:0,class:j(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":n.value.every(a=>a!==null)}])},[r("div",{class:j(["piramide-container",{"centrar-piramide":n.value.every(a=>a!==null)}])},[(o(),l(O,null,J($,(a,u)=>r("div",{key:u,class:"fila d-flex justify-content-center mb-3"},[(o(!0),l(O,null,J(a,(s,h)=>(o(),l("div",{key:h,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:I(V(u)),draggable:"true",onDragstart:w=>C(s.index),onDragover:t[0]||(t[0]=A(()=>{},["prevent"])),onDrop:w=>E(s.index)},[r("span",P,v(s.index+1),1),r("div",U,[n.value[s.index]?(o(),l("div",q,[r("strong",null,v(n.value[s.index].nombre),1),t[1]||(t[1]=r("br",null,null,-1)),y.value?(o(),l("span",H,"üí∞ $"+v(n.value[s.index].coste)+"M",1)):d("",!0)])):d("",!0)]),n.value[s.index]?(o(),l("img",{key:0,src:k(n.value[s.index].imagen),alt:n.value[s.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,L)):d("",!0)],44,F))),128))])),64))],2),c.value?(o(),l("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:M,style:{width:"200px"}},[r("img",{src:k(c.value.imagen),alt:c.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,Y),r("h6",G,v(c.value.nombre),1),y.value?(o(),l("p",K,"üí∞ $"+v(c.value.coste)+"M",1)):d("",!0)],32)):d("",!0)],2)):(o(),l("div",Q,[t[2]||(t[2]=r("h3",null,"üéÆ Ya jugaste hoy",-1)),r("p",null,"Vuelve a jugar en "+v(S.value),1)])),m.value?d("",!0):(o(),l("div",W,[r("p",X,"‚ù§Ô∏è Vidas restantes: "+v(_.value),1)])),m.value?d("",!0):(o(),l("button",{key:3,class:"btn btn-light mt -1",onClick:N,disabled:_.value===0||n.value.includes(null)}," Enviar ",8,Z)),p.value?(o(),l("div",{key:4,class:j(["resultado mt-4 p-3 rounded text-center",x.value])},[r("h3",null,v(p.value),1)],2)):d("",!0)]))}},ne=R(ee,[["__scopeId","data-v-d0e612d4"]]);export{ne as default};
