import{_ as z,r as i,e as B,c as s,a as n,b as d,n as k,F as x,d as _,t as c,o,l as P,m as N}from"./index-Bd_UDzU2.js";const F={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},L=["onDragstart","onDrop"],U={class:"posicion-numero"},q={class:"info-jugador text-center"},G={key:0},H={key:0},W=["src","alt"],Y=["src","alt"],K={class:"mb-1"},Q={key:0,class:"mb-0"},X={key:1,class:"text-center"},Z={class:"plantilla-entregada mt-4"},ee={class:"piramide-container"},te={class:"posicion-numero"},ae={class:"info-jugador text-center"},le={key:0},ne=["src","alt"],se={key:2,class:"vidas mt-4"},oe={class:"vidas-container d-flex justify-content-center"},re=["disabled"],ie={__name:"VentaJugadores",setup(ue){const f=i([]),w=i([]),v=i(null),l=i(Array(10).fill(null)),m=i(null),h=i(""),y=i(""),b=i(5),j=i(!1),p=i(!1),T=i(""),g=i([]),S=i(!1),$=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],E=a=>({width:`${160-a*10}px`,height:"70px",margin:"0 5px"}),D=a=>{const e=`/OnceRojo/${a.replace(/^\/+/,"")}`;return console.debug("🔍 Image URL:",e),e};function J(){const a=new Date,e=new Date;e.setHours(24,0,0,0);const t=e-a,u=Math.floor(t/(1e3*60*60)),r=Math.floor(t%(1e3*60*60)/(1e3*60));T.value=`${u}h ${r}m`}B(async()=>{const a=new Date().toISOString().split("T")[0];if(localStorage.getItem("topVentasJugado")===a){p.value=!0,J();const t=localStorage.getItem("plantillaEntregada");t&&(g.value=JSON.parse(t));return}try{const t=await fetch("/OnceRojo/jugadores_ventas.json").then(u=>u.json());console.debug("🔍 JSON Data:",t),t[a]?(w.value=t[a][0].jugadores,f.value=[...w.value],v.value=f.value.shift(),console.debug("🔍 Players for today:",f.value)):console.error("❌ No hay datos para la fecha actual:",a)}catch(t){console.error("❌ Error al cargar jugadores:",t)}});const C=a=>{m.value=null,a.dataTransfer.setData("text/plain",JSON.stringify(v.value))},I=a=>{const e=l.value[a];e&&(m.value=a,event.dataTransfer.setData("text/plain",JSON.stringify(e)))},V=a=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),m.value===null){const e=l.value[a];l.value[a]=v.value,v.value=e||(f.value.length>0?f.value.shift():null)}else{const e=l.value[a];l.value[a]=l.value[m.value],l.value[m.value]=e,m.value=null}},M=()=>{S.value=!1,document.body.offsetWidth,S.value=!0,setTimeout(()=>{S.value=!1},500)},A=()=>{let a=0;l.value.forEach((e,t)=>{var u;e&&e.coste===((u=w.value[t])==null?void 0:u.coste)&&a++}),b.value--,M(),l.value.every(e=>e!==null)&&a===10?(h.value="✅ ¡Perfecto! Ordenaste correctamente los 10 jugadores.",y.value="text-success bg-light",j.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(l.value)),g.value=[...l.value],J(),p.value=!0):b.value===0?(h.value="❌ Perdiste. Te quedaste sin vidas.",y.value="text-danger bg-light",j.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(l.value)),g.value=[...l.value],J(),p.value=!0):(h.value=`Ordenaste correctamente ${a}/10 jugadores.`,y.value="text-warning bg-light")};return(a,e)=>(o(),s("div",F,[e[4]||(e[4]=n("h1",{class:"titulo mb-5 text-center"},"🏆 Top Ventas de Jugadores",-1)),l.value.some(t=>t!==null)||!p.value?(o(),s("div",{key:0,class:k(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":l.value.every(t=>t!==null)}])},[n("div",{class:k(["piramide-container",{"centrar-piramide":l.value.every(t=>t!==null)}])},[(o(),s(x,null,_($,(t,u)=>n("div",{key:u,class:"fila d-flex justify-content-center mb-3"},[(o(!0),s(x,null,_(t,(r,O)=>(o(),s("div",{key:O,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:N(E(u)),draggable:"true",onDragstart:R=>I(r.index),onDragover:e[0]||(e[0]=P(()=>{},["prevent"])),onDrop:R=>V(r.index)},[n("span",U,c(r.index+1),1),n("div",q,[l.value[r.index]?(o(),s("div",G,[n("strong",null,c(l.value[r.index].nombre),1),e[1]||(e[1]=n("br",null,null,-1)),j.value?(o(),s("span",H,"💰 $"+c(l.value[r.index].coste)+"M",1)):d("",!0)])):d("",!0)]),l.value[r.index]?(o(),s("img",{key:0,src:D(l.value[r.index].imagen),alt:l.value[r.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,W)):d("",!0)],44,L))),128))])),64))],2),v.value?(o(),s("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:C,style:{width:"200px"}},[n("img",{src:D(v.value.imagen),alt:v.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,Y),n("h6",K,c(v.value.nombre),1),j.value?(o(),s("p",Q,"💰 $"+c(v.value.coste)+"M",1)):d("",!0)],32)):d("",!0)],2)):(o(),s("div",X,[e[3]||(e[3]=n("h3",null,"🎮 Ya jugaste hoy",-1)),n("p",null,"Vuelve a jugar en "+c(T.value),1),n("div",Z,[n("div",ee,[(o(),s(x,null,_($,(t,u)=>n("div",{key:u,class:"fila d-flex justify-content-center mb-3"},[(o(!0),s(x,null,_(t,(r,O)=>(o(),s("div",{key:O,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:N(E(u))},[n("span",te,c(r.index+1),1),n("div",ae,[g.value[r.index]?(o(),s("div",le,[n("strong",null,c(g.value[r.index].nombre),1),e[2]||(e[2]=n("br",null,null,-1)),n("span",null,"💰 $"+c(g.value[r.index].coste)+"M",1)])):d("",!0)]),g.value[r.index]?(o(),s("img",{key:0,src:D(g.value[r.index].imagen),alt:g.value[r.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,ne)):d("",!0)],4))),128))])),64))])])])),p.value?d("",!0):(o(),s("div",se,[n("div",oe,[(o(),s(x,null,_(5,t=>n("img",{key:t,class:k(["escudo-vida",{"escudo-perdido":t>b.value,temblor:S.value}]),src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Escudo_del_Club_Atl%C3%A9tico_Independiente.svg/973px-Escudo_del_Club_Atl%C3%A9tico_Independiente.svg.png",alt:"vida"},null,2)),64))])])),p.value?d("",!0):(o(),s("button",{key:3,class:"btn btn-light mt -1",onClick:A,disabled:b.value===0||l.value.includes(null)}," Enviar ",8,re)),h.value?(o(),s("div",{key:4,class:k(["resultado mt-4 p-3 rounded text-center",y.value])},[n("h3",null,c(h.value),1)],2)):d("",!0)]))}},ce=z(ie,[["__scopeId","data-v-05d63259"]]);export{ce as default};
