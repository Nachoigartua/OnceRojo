import{_ as V,b as u,d as C,c as o,a as l,e as v,t as d,n as b,F as D,r as J,o as n,l as E,m as I,h as P}from"./index-BcSonkdL.js";const R={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},B={key:0,class:"text-center"},z={class:"text-white"},U=["onDrop"],q={class:"posicion-numero"},F={class:"info-jugador text-center"},L={key:0},Y=["src","alt"],H=["src","alt"],Z={class:"mb-1"},G={class:"mb-0"},K={key:1,class:"vidas mt-4"},Q={class:"text-center"},W=["disabled"],X={__name:"VentaJugadores",setup(ee){const p=u([]),y=u([]),c=u(null),s=u(Array(10).fill(null)),m=u(null),h=u(""),f=u(""),x=u(5),g=u(!1),S=u(""),k=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],O=t=>({width:`${160-t*10}px`,height:"70px",margin:"0 5px"}),T=()=>{const t=new Date,e=new Date(t.toLocaleString("en-US",{timeZone:"America/Argentina/Buenos_Aires"})),a=new Date(e);a.setHours(24,0,0,0);const r=a-e,i=Math.floor(r/(1e3*60*60)),_=Math.floor(r%(1e3*60*60)/(1e3*60));S.value=`${i}h ${_}m`},w=t=>`/${t.replace(/^\/+/,"")}`,$=()=>{const t=new Date().toISOString().split("T")[0],e=localStorage.getItem("ultimoJuego"),a=localStorage.getItem("estadoPiramide");e===t?(g.value=!0,T(),a&&(s.value=JSON.parse(a))):(localStorage.removeItem("estadoPiramide"),localStorage.removeItem("ultimoJuego"))};C(async()=>{if($(),!g.value)try{const t=await fetch("/OnceRojo/jugadores_ventas.json").then(a=>a.json()),e=j(t).slice(0,10);y.value=[...e].sort((a,r)=>r.coste-a.coste),p.value=j(e),c.value=p.value.shift()}catch(t){console.error("‚ùå Error al cargar jugadores:",t)}});const j=t=>{let e=t.length,a;for(;e;)a=Math.floor(Math.random()*e--),[t[e],t[a]]=[t[a],t[e]];return t},M=t=>{m.value=null,t.dataTransfer.setData("text/plain",JSON.stringify(c.value))},A=t=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),m.value===null){const e=s.value[t];s.value[t]=c.value,c.value=e||(p.value.length>0?p.value.shift():null)}else{const e=s.value[t];s.value[t]=s.value[m.value],s.value[m.value]=e,m.value=null}},N=()=>{let t=0;s.value.forEach((e,a)=>{var r;e&&e.coste===((r=y.value[a])==null?void 0:r.coste)&&t++}),x.value--,s.value.every(e=>e!==null)&&t===10?(h.value="‚úÖ ¬°Perfecto! Ordenaste correctamente los 10 jugadores.",f.value="text-success bg-light"):x.value===0?(h.value="‚ùå Perdiste. Te quedaste sin vidas.",f.value="text-danger bg-light"):(h.value=`Ordenaste correctamente ${t}/10 jugadores.`,f.value="text-white bg-light"),localStorage.setItem("ultimoJuego",new Date().toISOString().split("T")[0]),localStorage.setItem("estadoPiramide",JSON.stringify(s.value))};return(t,e)=>(n(),o("div",R,[e[3]||(e[3]=l("h1",{class:"titulo mb-5 text-center"},"üèÜ Top Ventas de Jugadores",-1)),g.value?(n(),o("div",B,[l("h3",z,"Ya has jugado, espera "+d(S.value)+" para volver a jugar.",1),e[1]||(e[1]=l("p",{class:"text-light"},"Esta es la pir√°mide que entregaste:",-1))])):v("",!0),l("div",{class:b(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":s.value.every(a=>a!==null)}])},[l("div",{class:b(["piramide-container",{"centrar-piramide":s.value.every(a=>a!==null)}])},[(n(),o(D,null,J(k,(a,r)=>l("div",{key:r,class:"fila d-flex justify-content-center mb-3"},[(n(!0),o(D,null,J(a,(i,_)=>(n(),o("div",{key:_,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:I(O(r)),onDragover:e[0]||(e[0]=E(()=>{},["prevent"])),onDrop:te=>A(i.index)},[l("span",q,d(i.index+1),1),l("div",F,[s.value[i.index]?(n(),o("div",L,[l("strong",null,d(s.value[i.index].nombre),1),e[2]||(e[2]=l("br",null,null,-1)),P(" üí∞ $"+d(s.value[i.index].coste)+"M ",1)])):v("",!0)]),s.value[i.index]?(n(),o("img",{key:0,src:w(s.value[i.index].imagen),alt:s.value[i.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,Y)):v("",!0)],44,U))),128))])),64))],2),c.value&&!g.value?(n(),o("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:M,style:{width:"200px"}},[l("img",{src:w(c.value.imagen),alt:c.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,H),l("h6",Z,d(c.value.nombre),1),l("p",G,"üí∞ $"+d(c.value.coste)+"M",1)],32)):v("",!0)],2),g.value?v("",!0):(n(),o("div",K,[l("p",Q,"‚ù§Ô∏è Vidas restantes: "+d(x.value),1)])),g.value?v("",!0):(n(),o("button",{key:2,class:"btn btn-light mt-4",onClick:N,disabled:x.value===0||s.value.includes(null)}," Enviar ",8,W)),h.value?(n(),o("div",{key:3,class:b(["resultado mt-4 p-3 rounded text-center",f.value])},[l("h3",null,d(h.value),1)],2)):v("",!0)]))}},se=V(X,[["__scopeId","data-v-b28fef6f"]]);export{se as default};
