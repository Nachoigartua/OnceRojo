import{_ as z,r as i,e as B,c as s,a as n,b as d,n as S,F as h,d as _,t as c,o,l as F,m as $}from"./index-C42jy6vk.js";import{o as P,c as L}from"./horaArgentina-wJwX-x9z.js";const U={class:"jugadores-wrapper d-flex flex-column align-items-center min-vh-100 text-white p-4"},q=["onDragstart","onDrop"],G={class:"posicion-numero"},H={class:"info-jugador text-center"},W={key:0},Y={key:0},K=["src","alt"],Q=["src","alt"],X={class:"mb-1"},Z={key:0,class:"mb-0"},ee={key:1,class:"text-center"},te={class:"plantilla-entregada mt-4"},ae={class:"piramide-container"},le={class:"posicion-numero"},ne={class:"info-jugador text-center"},se={key:0},oe=["src","alt"],re={key:2,class:"vidas mt-4"},ie={class:"vidas-container d-flex justify-content-center"},ue=["disabled"],de={__name:"VentaJugadores",setup(ce){const f=i([]),w=i([]),v=i(null),t=i(Array(10).fill(null)),m=i(null),x=i(""),y=i(""),b=i(5),j=i(!1),p=i(!1),T=i(""),g=i([]),k=i(!1),E=[[{index:0}],[{index:1},{index:2}],[{index:3},{index:4},{index:5}],[{index:6},{index:7},{index:8},{index:9}]],N=a=>({width:`${160-a*10}px`,height:"70px",margin:"0 5px"}),D=a=>{const e=`/OnceRojo/${a.replace(/^\/+/,"")}`;return console.debug("🔍 Image URL:",e),e};function J(){T.value=L()}B(async()=>{const a=P();if(localStorage.getItem("topVentasJugado")===a){p.value=!0,J();const l=localStorage.getItem("plantillaEntregada");l&&(g.value=JSON.parse(l));return}try{const l=await fetch("/OnceRojo/jugadores_ventas.json").then(u=>u.json());console.debug("🔍 JSON Data:",l),l[a]?(w.value=l[a][0].jugadores,f.value=[...w.value],v.value=f.value.shift(),console.debug("🔍 Players for today:",f.value)):console.error("❌ No hay datos para la fecha actual:",a)}catch(l){console.error("❌ Error al cargar jugadores:",l)}});const A=a=>{m.value=null,a.dataTransfer.setData("text/plain",JSON.stringify(v.value))},C=a=>{const e=t.value[a];e&&(m.value=a,event.dataTransfer.setData("text/plain",JSON.stringify(e)))},V=a=>{if(JSON.parse(event.dataTransfer.getData("text/plain")),m.value===null){const e=t.value[a];t.value[a]=v.value,v.value=e||(f.value.length>0?f.value.shift():null)}else{const e=t.value[a];t.value[a]=t.value[m.value],t.value[m.value]=e,m.value=null}},I=()=>{k.value=!1,document.body.offsetWidth,k.value=!0,setTimeout(()=>{k.value=!1},500)},M=()=>{let a=0;t.value.forEach((e,l)=>{var u;e&&e.coste===((u=w.value[l])==null?void 0:u.coste)&&a++}),b.value--,I(),t.value.every(e=>e!==null)&&a===10?(x.value="✅ ¡Perfecto! Ordenaste correctamente los 10 jugadores.",y.value="text-success bg-light",j.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(t.value)),g.value=[...t.value],J(),p.value=!0):b.value===0?(x.value="❌ Perdiste. Te quedaste sin vidas.",y.value="text-danger bg-light",j.value=!0,localStorage.setItem("topVentasJugado",new Date().toISOString().split("T")[0]),localStorage.setItem("plantillaEntregada",JSON.stringify(t.value)),g.value=[...t.value],J(),p.value=!0):(x.value=`Ordenaste correctamente ${a}/10 jugadores.`,y.value="text-warning bg-light")};return(a,e)=>(o(),s("div",U,[e[4]||(e[4]=n("h1",{class:"titulo mb-5 text-center"},"🏆 Top Ventas de Jugadores",-1)),t.value.some(l=>l!==null)||!p.value?(o(),s("div",{key:0,class:S(["contenedor-principal d-flex align-items-center w-100",{"centrado-final":t.value.every(l=>l!==null)}])},[n("div",{class:S(["piramide-container",{"centrar-piramide":t.value.every(l=>l!==null)}])},[(o(),s(h,null,_(E,(l,u)=>n("div",{key:u,class:"fila d-flex justify-content-center mb-3"},[(o(!0),s(h,null,_(l,(r,O)=>(o(),s("div",{key:O,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:$(N(u)),draggable:"true",onDragstart:R=>C(r.index),onDragover:e[0]||(e[0]=F(()=>{},["prevent"])),onDrop:R=>V(r.index)},[n("span",G,c(r.index+1),1),n("div",H,[t.value[r.index]?(o(),s("div",W,[n("strong",null,c(t.value[r.index].nombre),1),e[1]||(e[1]=n("br",null,null,-1)),j.value?(o(),s("span",Y,"💰 $"+c(t.value[r.index].coste)+"M",1)):d("",!0)])):d("",!0)]),t.value[r.index]?(o(),s("img",{key:0,src:D(t.value[r.index].imagen),alt:t.value[r.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,K)):d("",!0)],44,q))),128))])),64))],2),v.value?(o(),s("div",{key:0,class:"jugador-actual p-3 bg-white text-dark rounded shadow text-center animate-bounce",draggable:"true",onDragstart:A,style:{width:"200px"}},[n("img",{src:D(v.value.imagen),alt:v.value.nombre,class:"img-fluid rounded mb-2",style:{"max-height":"100px","object-fit":"contain"}},null,8,Q),n("h6",X,c(v.value.nombre),1),j.value?(o(),s("p",Z,"💰 $"+c(v.value.coste)+"M",1)):d("",!0)],32)):d("",!0)],2)):(o(),s("div",ee,[e[3]||(e[3]=n("h3",null,"🎮 Ya jugaste hoy",-1)),n("p",null,"Vuelve a jugar en "+c(T.value),1),n("div",te,[n("div",ae,[(o(),s(h,null,_(E,(l,u)=>n("div",{key:u,class:"fila d-flex justify-content-center mb-3"},[(o(!0),s(h,null,_(l,(r,O)=>(o(),s("div",{key:O,class:"slot-jugador d-flex align-items-center justify-content-center bg-secondary rounded position-relative",style:$(N(u))},[n("span",le,c(r.index+1),1),n("div",ne,[g.value[r.index]?(o(),s("div",se,[n("strong",null,c(g.value[r.index].nombre),1),e[2]||(e[2]=n("br",null,null,-1)),n("span",null,"💰 $"+c(g.value[r.index].coste)+"M",1)])):d("",!0)]),g.value[r.index]?(o(),s("img",{key:0,src:D(g.value[r.index].imagen),alt:g.value[r.index].nombre,class:"img-fluid rounded",style:{height:"60px",width:"70px","object-fit":"contain"}},null,8,oe)):d("",!0)],4))),128))])),64))])])])),p.value?d("",!0):(o(),s("div",re,[n("div",ie,[(o(),s(h,null,_(5,l=>n("img",{key:l,class:S(["escudo-vida",{"escudo-perdido":l>b.value,temblor:k.value}]),src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Escudo_del_Club_Atl%C3%A9tico_Independiente.svg/973px-Escudo_del_Club_Atl%C3%A9tico_Independiente.svg.png",alt:"vida"},null,2)),64))])])),p.value?d("",!0):(o(),s("button",{key:3,class:"btn btn-light mt -1",onClick:M,disabled:b.value===0||t.value.includes(null)}," Enviar ",8,ue)),x.value?(o(),s("div",{key:4,class:S(["resultado mt-4 p-3 rounded text-center",y.value])},[n("h3",null,c(x.value),1)],2)):d("",!0)]))}},me=z(de,[["__scopeId","data-v-a0a2783e"]]);export{me as default};
